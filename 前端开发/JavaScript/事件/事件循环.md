# 事件循环
## 栈，队列和事件循环
如果你运行了一个函数 `foo`，然后它又调用了函数 `bar`，那么就有了一个深度为3的栈(全局上下文，foo()以及bar())，代码运行后会由队列来负责，前栈被解析后，会去队列中挑选新的代码来执行。栈和队列是对于掌握事件来说至关重要的。除此之外还有第三个要素，堆。它是变量，函数以及其他命名对象所存在的区域。当JavaScript需要访问对象函数或者变量时，就会去堆中获取要访问的信息。

堆和队列是如何影响事件处理的呢，要回答这个问题就要介绍一下事件循环。这是浏览器中两个线程之间的合作，事件跟踪线程和JavaScript线程

	注意，除了Web worker之外，JavaScript都是单线程的
	
这两个线程共同捕获用户事件，并根据是否注册过事件处理程序对其分类，这个过程称之为事件循环。每次循环开始的时候，都会检查用户事件是否已经注册过事件处理程序。如果没有则什么都不做。如果有对应的事件处理程序，事件循环会将其放到JavaScript队列的首部，使得JavaScript可以第一时间执行这些程序

这儿有个问题，队列负责解释怎么才算是第一时间。这一般意味着前栈被解析后，这样一来事件处理有了异步的味道，尤其是当栈中包含了多个帧或者要长时间运行的代码时，事件使得我们可以直接跳到队列的最前面，但是这并不会中断栈中正在执行的内容。再大多数情况下这个区别对于开发者不重要，重要的是要知道事件循环只是将事件插到队首，它不会打断正在执行的代码
(似乎解释了setTimeout的时间并不准的问题 TODO 上网继续搜事件循环相关的学习内容)

